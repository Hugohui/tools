(function () { var v = this, a = 0, r = [], t = {}, u = $(window), i = function () { this.init.apply(this, arguments) }; i.fn = i.prototype; i.fn.init = function (n) { var i = { clickOverlayEffect: "shake", overlayColor: "#000", overlayOpacity: .3, allowPromptBlank: !1, displayClose: !0, enableKeyPress: !0 }, t; n && Object.prototype.toString.call(n) == "[object Object]" ? (t = {}, jQuery.each(i, function (i, r) { t[i] = n[i] || r }), this.config = t) : this.config = i; this.config.enableKeyPress && y.call(this) }; i.fn.load = function (n, i, r) { var h, e, s; if (arguments.length !== 0) { if (i = i || $.noop, r) { if (function () { for (var n in t) if (t.hasOwnProperty(n)) return !1; return !0 }()) { o.call(this); return } } else { if (Object.prototype.toString.call(t[n]) == "[object Array]") { t[n].push(i); return } t[n] = [i]; for (h in t) if (h !== n) return } (arguments.length === 1 && Array.prototype.push.call(arguments, i), f.call(this, "load", arguments, r) || r) && ($("#BlackBox").append('<div id="BlackBoxLoad">载入中<\/div>'), e = $("#BlackBoxLoad").fadeTo(0, 0).fadeTo(400, 1), s = function () { e.css({ left: (u.width() - e.width()) / 2, top: (u.height() - e.height()) / 2 }) }, s.call(this), u.resize(s)) } }; i.fn.ready = function (n) { var i, u, f, e, s; if (arguments.length !== 0) { if (i = t[n], i) for (u = 0; u < i.length; u++) f = i[u], f.call(this); delete t[n]; for (e in t) if (t.hasOwnProperty(e)) return; r[0].type === "load" && (s = this, $("#BlackBoxLoad").fadeTo(400, 0, function () { $(this).remove(); o.call(s) })) } }; i.fn.loadClear = function (n) { n = n || $.noop; for (var i in t) t.hasOwnProperty(i) && delete t[i]; $("#BlackBoxLoad").fadeTo(400, 0); o.call(this, n) }; i.fn.alert = function () { var t, i; arguments.length !== 0 && (t = h.apply(this, arguments), f.call(this, "alert", t, t[3]) || t[3]) && (i = $("#BlackBox"), i.append('<div class = "system Inner" id="alert' + n.call(this) + '"><p>' + t[0] + "<\/p><\/div>"), e.call(this, $("#alert" + n.call(this)), t[2]), s.call(this), this.config.displayClose && t[2].title && l.call(this, t[1]), c.call(this, t[1], null, t[2])) }; i.fn.confirm = function () { var t, r, u, i; arguments.length !== 0 && (t = h.apply(this, arguments), f.call(this, "confirm", t, t[3]) || t[3]) && (r = $("#BlackBox"), r.append('<div class = "system Inner" id="confirm' + n.call(this) + '"><p>' + t[0] + "<\/p><\/div>"), e.call(this, $("#confirm" + n.call(this)), t[2]), s.call(this), u = function () { return t[1].call(this, !0) }, i = function () { return t[1].call(this, !1) }, this.config.displayClose && t[2].title && l.call(this, i), c.call(this, u, i, t[2])) }; i.fn.prompt = function () { var t, r, u; if (arguments.length !== 0 && (t = h.apply(this, arguments), f.call(this, "prompt", t, t[3]) || t[3])) { r = t[2].verify || function () { return !0 }; u = $("#BlackBox"); u.append('<div class = "system Inner" id="prompt' + n.call(this) + '"><p>' + t[0] + '<\/p><input id="boxInput" style="height:30px;width:460px" placeholder="必填，最多20字"><\/div>'); e.call(this, $("#prompt" + n.call(this)), t[2]); s.call(this); var i = $("#boxInput").focus(), a = function () { return t[1].call(this, i.val()) }, o = function () { return t[1].call(this, null) }, v = this; i.blur(function () { $(this).val($.trim($(this).val())) }); this.config.displayClose && t[2].title && l.call(this, o); t[2].verify = function () { return (v.config.allowPromptBlank || i.val()) && r.call(this, i.val()) ? !0 : (i.addClass("boxError").focus(), !1) }; c.call(this, a, o, t[2]) } }; i.fn.popup = function (t, i, r) { if (arguments.length !== 0 && (i = i || $.noop, arguments.length === 1 && Array.prototype.push.call(arguments, i), f.call(this, "popup", arguments, r) || r)) { var u = $("#BlackBox"); u.append('<div class="normal" id="popup' + n.call(this) + '">' + t + "<\/div>"); e.call(this, $("#popup" + n.call(this)), {}); s.call(this); i.call(this, u) } }; i.fn.boxClose = function (t) { var i = $("#" + n.call(this)), r = this; i[0] && i.fadeOut(400, function () { $(this).remove(); o.call(r, t) }) }; i.fn.boxShake = function () { var i = $("#" + n.call(this)), r, t; if (i[0]) for (r = i.offset().left, t = 1; 4 >= t; t++) i.animate({ left: r - (12 - 3 * t) }, 50), i.animate({ left: r + 2 * (12 - 3 * t) }, 50) }; var h = function (n, t, i) { return t = t || $.noop, $.isFunction(t) || (i = t, t = $.noop), i = i || {}, arguments.length === 1 && Array.prototype.push.call(arguments, t, i), arguments.length === 2 && Array.prototype.push.call(arguments, i), arguments }, e = function (t, i) { t.wrap('<div class="BlackBoxContent" draggable="true" id="' + n.call(this) + '"><\/div>'); var r = $("#" + n.call(this)).fadeTo(0, 0).fadeTo(400, 1), w = r.width(), b = r.height(), h = function () { r.css({ left: (u.width() - w) / 2 + "px", top: (u.height() - b - 80) / 2 + "px" }) }; if (i.title) { r.prepend('<p class="title">' + i.title + "<\/p>"); var f = r, k = r.find(".title"), c, l, a, v, e, o, s = function (n) { n.stopPropagation(); n.preventDefault() }, d = function (n) { $(document).bind("mousemove", y); $(document).bind("mouseup", p); c = e = parseFloat(f.css("left")); l = o = parseFloat(f.css("top")); a = n.pageX; v = n.pageY; s(n) }, y = function (n) { e = c + n.pageX - a; o = l + n.pageY - v; f.css("left", e); f.css("top", o); s(n) }, p = function (n) { $(document).unbind("mousemove", y); $(document).unbind("mouseup", p); s(n) }; k.bind("mousedown", d) } u.resize(h); h.call(this) }, y = function () { var n = this; $(document).bind("keydown.fb", function (t) { var i = $(".BlackBoxContent"), r; i[0] && (t.keyCode == 13 ? i.find(".submit").click() : t.keyCode == 27 && (r = i.find(".close")[0] || i.find(".cancel")[0] || i.find(".submit")[0], r ? $(r).click() : n.boxClose.call(n))) }) }, f = function (n, t, i) { var f, e, o; return (a += 1, i || r.push({ id: a, type: n, args: t }), r.length !== 1) ? !1 : ($("#BlackBox")[0] || $("body").append('<div id="BlackBox"><div id="BBOverlay"><\/div><\/div>'), f = $("#BBOverlay"), e = this.config, i || f.css({ background_color: e.overlayColor }).fadeTo(0, 0).fadeTo(400, e.overlayOpacity), o = function () { f.width(u.width() + "px").height(u.height() + "px") }, o.call(this), u.resize(o), !0) }, o = function (n, t) { if (n && n.call(this), t ? r.length = 0 : r.shift(), $("#BBOverlay").unbind("click"), r.length == 0) { var i = $("#BlackBox"); if (!i[0]) return; i.fadeOut(400, function () { $(this).remove() }) } else Array.prototype.push.call(r[0].args, !0), this[r[0].type].apply(this, r[0].args) }, s = function () { var u = this.config.clickOverlayEffect, t = $("#" + n.call(this)), r = $("#BBOverlay"), i = this; if (u === "close") { r.click(function () { var n = t.find(".close")[0] || t.find(".cancel")[0] || t.find(".submit")[0]; n ? $(n).click() : i.boxClose.call(i) }); return } r.click(function () { var n = t.find("input"); n.length === 1 && n.focus(); i.boxShake.call(i) }) }, c = function (t, i, r) { var e, u, f, o, s; arguments.length !== 0 && (e = $("#" + n.call(this)), u = this, e.find(".Inner").append('<div id="BlackBoxAction"><\/div>'), f = $("#BlackBoxAction"), i && (o = r.cancel || "取消", f.append('<button class="cancel">' + o + "<\/button>"), f.find(".cancel").click(function () { u.boxClose.call(u, i) })), t && (s = r.value || "确定", f.append('<button class="submit">' + s + "<\/button>"), f.find(".submit").click(function () { !r.verify || r.verify.call(u) ? u.boxClose.call(u, t) : u.boxShake.call(u) }))) }, l = function (t) { var i = $("#" + n.call(this)), r = this; i.append('<div class="close">x<\/div>'); i.find(".close").click(function () { r.boxClose.call(r, t) }) }, n = function () { var n = r[0].id; return "_box_" + n }; v.BlackBox = i }).call(window);
/*
//# sourceMappingURL=jquery.blackbox.min.js.map
*/